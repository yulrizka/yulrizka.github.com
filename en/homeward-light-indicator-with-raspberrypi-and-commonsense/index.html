<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Homeward light indicator with RaspberryPi and CommonSense - </title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Creating Light that turn on when you return from office with raspberry pi and CommonSense">
		<meta property="og:url" content="http://localhost:1313/en/homeward-light-indicator-with-raspberrypi-and-commonsense/">
  <meta property="og:title" content="Homeward light indicator with RaspberryPi and CommonSense">
  <meta property="og:description" content="Creating Light that turn on when you return from office with raspberry pi and CommonSense">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2013-02-26T20:33:00+02:00">
    <meta property="article:modified_time" content="2013-02-26T20:33:00+02:00">
    <meta property="article:tag" content="Web">
    <meta property="article:tag" content="Raspberrypi">

		
  <meta itemprop="name" content="Homeward light indicator with RaspberryPi and CommonSense">
  <meta itemprop="description" content="Creating Light that turn on when you return from office with raspberry pi and CommonSense">
  <meta itemprop="datePublished" content="2013-02-26T20:33:00+02:00">
  <meta itemprop="dateModified" content="2013-02-26T20:33:00+02:00">
  <meta itemprop="wordCount" content="667">
  <meta itemprop="keywords" content="raspberrypi,,raspberry,,light,,commonsense,,sensor,">
		
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Homeward light indicator with RaspberryPi and CommonSense">
  <meta name="twitter:description" content="Creating Light that turn on when you return from office with raspberry pi and CommonSense">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/en/" title="Ahmy&#39;s Laboratory" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/ahmy.jpg">
				</div><div class="logo__item logo__text">
					<div class="logo__title">Ahmy&#39;s Laboratory</div>
					<div class="logo__tagline">Random thoughts and rumblings. All opinions are my own.</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/en/cv/">
				
				<span class="menu__text">Curriculum vitae</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Homeward light indicator with RaspberryPi and CommonSense</h1>
			<div class="post__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 16 16"><path d="M8 1c2 0 3.5 2 3.5 4.5S10 9 10 9c3 1 4 2 4 6H2c0-4 1-5 4-6 0 0-1.5-1-1.5-3.5S6 1 8 1"/></svg><span class="meta__text">Ahmy Yulrizka</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 1 1 0 28 1 1 0 0 1 0-28m0 3a3 3 0 1 0 0 22 3 3 0 0 0 0-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class="meta__text" datetime="2013-02-26T20:33:00&#43;02:00">2013-02-26</time></div></div>
		</header>
		<div class="content post__content clearfix">
			<div class="row">
  <div class="span8 offset1">
    <iframe align="center" width="628" height="400" src="https://www.youtube.com/embed/35ylS4IX_mc" frameborder="0" allowfullscreen></iframe>
  </div>
</div><br/>
I've been tinkering with my [raspberry-pi][raspberry-pi] for quite some time now. What I like about it because it is cheap ($25),
it's run Linux (especially debian based) and most of all it's have General Purpose Input Output pin. Since I was a kid, I always
wanted to control electronic appliance remotely. Luckily my friend [@pimnijdam][pimnijdam] thought me how to control a relay board.
Basically it's just like an electric switch that connect/disconnect current when you supply a low voltage.
<p>So I connect one of the GPIO pin to the relay board and from the relay board to the lamp. Now I can control the desk lamp through
my raspberry-pi by issuing a linux command. Had been successfully doing this, I wanted to the lamp not only from the raspberry pi
but anywhere. The easiest way that I could think of is running a web server inside the raspberry-pi. The debian repository is
quite awesome. So I could install a ruby/python and it only took a single command.</p>
<p>So I did create a <a href="https://github.com/yulrizka/pi-sinatra-gpio/blob/master/app.rb">project</a>  with ruby/sinatra to control this light. Its really small (30 lines of code, 80 lines html + js) and with this project I can control up to 3 light, one of those eventually control the light. In case you are interested, I put the source on <a href="https://github.com/yulrizka/pi-sinatra-gpio/blob/master/app.rb">github</a>.
This project uses <a href="https://github.com/jwhitehorn/pi_piper">pi-piper</a> a ruby library that wrap <a href="https://projects.drogon.net/raspberry-pi/wiringpi/">wiringPi</a>, which is library that is used to control the GPIO pin.</p>
<div class="row">
<div class="span8 offset1">
<div class="thumbnail">
  <img src="/images/post/2013/02/homeward-indicator-project.jpg" alt="homeward indicator">
  <div class="caption">
    The light will turn on whenever I leave the office at noon.
  </div>
</div>
</div>
</div><br/>
<div class="row">
  <div class="span4 offset1">
    <div class="thumbnail">
      <img src="/images/post/2013/02/lamp-off.jpg" alt="lamp off">
      <div class="caption">
        Controlling Lamp with Raspberry-pi + ruby/sinatra
      </div>
    </div>
  </div>
  <div class="span4">
    <div class="thumbnail">
      <img src="/images/post/2013/02/lamp-on.jpg">
      <div class="caption">
        The phone open a web browser to the raspberry pi
      </div>
    </div>
  </div>
</div><br/>
<p>Now, turning a desk lamp with pi is something; But it&rsquo;s quite boring and not really useful. Now let us make something a bit
interesting. Instead of controlling it manually, The light be trigger on my activity. In this case I the light to turn on
when ever I came back from the office on every working day. So at home my wife know exactly when I leave the office. I already
have it running a web server, so basically I can control it from my mobile phone. But I don&rsquo;t want to do this every single day.
And this is where <a href="http://www.sense-os.nl/commonsense">ComonSense</a> really makes thing easy for me.</p>
<p><a href="http://www.sense-os.nl/commonsense">CommonSense</a> is a platform to store, retrieve, analyze and interpret our sensory data. What is a sensor ? well anything could be a sensor. From physical sensor on our mobile phone like accelerometer, noise, position, cell network, light, ambience and more sophisticated sensor like sensor that tell your quality of sleep. By using one or more sensor, it could create more intelligent sensor. For example a sensor that tell wether you are standing or sitting by analyzing the accelerometer data. CommonSense is Awesome!, but for this experiment we will be using a simple location sensor. It will tell where is my current location by GPS or
wifi-network.</p>
<p>What is make it easy is I don&rsquo;t have to create an application on my mobile phone. CommonSense already have a platform that run on
<a href="https://play.google.com/store/apps/details?id=nl.sense_os.app">Android</a> or <a href="https://itunes.apple.com/nl/app/senseplatform/id447552125?mt=8&uo=4">iOs</a>. The application act as an agent that collect and sample sensor data from the mobile phone. By it self it&rsquo;s not really doing much right now but combine with the <a href="http://www.sense-os.nl/commonsense">CommonSense</a> make it really easy for a developer like me to
easily experiment with my data. So with this sense app, the raspberry-pi could easily get data from my mobile phone through the
<a href="http://developer.sense-os.nl">CommonSense API</a>.</p>
<div class="row">
  <div class="span3 offset1">
    <div class="thumbnail">
      <img src="/images/post/2013/02/sense-app.jpg" alt="sense app">
      <div class="caption">
        Sense Android App - Works as an aggent of CommonSense
      </div>
    </div>
  </div>
  <div class="span7">
    <div class="thumbnail">
      <img src="/images/post/2013/02/biking-out-of-the-office.jpg" alt="biking out of the office">
      <div class="caption">
        The light will turn on when I'm 200m away from the office
      </div>
    </div>
  </div>
</div><br/>
Again, my awesome colleague [@pim][pimnijdam] create a prototype of [python framework][python framework] that make it very easy for me to
implement my project. You should definitely [chek it out!][python framework]. I've created the _homeward light indicator_ project
using the early version of the framework. This is actually my first encounter with Python. Although I still prefer doing my
project with Ruby, I'm really enjoying working with Python.

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 0 0 0-6 3 3 0 0 0 0 6"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/en/tags/web/" rel="tag">web</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/en/tags/raspberrypi/" rel="tag">raspberrypi</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Ahmy Yulrizka avatar" src="/img/ahmy.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Ahmy Yulrizka</span>
	</div>
	<div class="authorbox__description">
		Software Engineer, Sports Enthusiast, and like to write about random things
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/en/responsive-design/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Responsive Design</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/en/safely-sharing-credentials-with-pgp/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Safely sharing credentials with PGP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 Ahmy Yulrizka.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>