<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>labs.yulrizka.com - Testing ruby code with benchmark_suite</title>
<meta name="description" content="Technical blog of Ahmy Yulrizka">
<meta name="author" content="Ahmy Yulrizka">
<!-- Framework CSS -->
<link href="/stylesheets/application.css" media="screen, projection" rel="stylesheet" type="text/css" />

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>


</head>
<body>
<div id="container" class="sidebar-left">
  <header>
    <div id="banner">
      <div class="wrapper">
        <ul class="excerpt">
          <li class="active">
            <div class="image"><img src="/images/icon/labs.png" alt=""/></div>
            <div class="text">
              <p class="title">Let each man exercise the art he knows</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore e Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
            </div>
          </li>
          <li>
            <div class="image"><img src="/images/icon/labs.png" alt=""/></div>
            <div class="text">
              <p class="title">Ruby (and Rails) </p>
              <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore e Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
            </div>
          </li>
          <li>
            <div class="image"><img src="/images/icon/labs.png" alt=""/></div>
            <div class="text">
              <p class="title">Android</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore e Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut </p>
            </div>
          </li>
        </ul>
      </div> 
    </div>
    <div class="navbar navbar-fixed-top relative">  
      <div class="navbar-inner">    
        <div class="fill">
          <div class="container">
            <span class="brand" href="#">Labs.Yulrizka.com</span>
            <a class="btn btn-navbar" href="#" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <div id="page-view">
              <ul class="nav pull-right">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" rel="popover" data-content="Arrange the sidebar position Left / Right / None" 
                  data-original-title="Sidebar position" data-placement="left">
                    <i class="icon-th-list icon-white"></i><b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a href="#" id="sidebar-left-link"><i class="icon-th-list"></i> Left Panel</a></li>
                    <li><a href="#" id="sidebar-none-link"><i class="icon-th-list"></i> No Panel</a></li>
                    <li><a href="#" id="sidebar-right-link"><i class="icon-th-list"></i> Right Panel</a></li>
                  </ul>
                </li>
              </ul>
            </div>            
            <div id="social-icon" class="pull-right">
              <a href="https://twitter.com/#!/yulrizka" target="twitter" rel="popover" data-content="Follow me on twitter" data-original-title="@yulrizka" data-placement="left"><img src="/images/icon/twitter.png"></a>  
              <a href="https://github.com/yulrizka" target="github" rel="popover" data-content="Github is source code repository that encourage social coding. Fork my projects from github." data-original-title="Fork me on Github" data-placement="left"><img src="/images/icon/github.png"></a>  
              <a href="http://feeds.feedburner.com/yulrizka/labs" target="feed" rel="popover" data-content="Suscribe this blog feed on feed burner" data-original-title="RSS feed" data-placement="left"><img src="/images/icon/feed.png"></a>  
            </div>
            <div class="nav-link nav-collapse">
              <ul class="nav">
                <li class="active banner"><a href="/">Home</a></li>
                <li class=""><a href="/">Ruby (and Rails)</a></li>
                <li class=""><a href="/">Android</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


  <div class="container-fluid">
    <div class="row-fluid">
      <div id="content-wrapper" class="span9 <!-- sidebar-right -->">
        <div class="content">
          <p>Just a couple days ago I found out <a href="http://www.therubygame.com" title="The Ruby Game">therubygame.com</a> which challenge us to
solve a problem with ruby. The result were measured by the <strong>fastest</strong>, <strong>slowest</strong>, <strong>shortest</strong>, <strong>longest</strong>,
<strong>cheaters</strong> (yup there are also some rule).</p>

<p>And also I was listening to an episode of ruby rouge on <a href="http://rubyrogues.com/034-rr-benchmarking-and-profiling/" title="034 RR Benchmarking and Profiling">Benchmarking</a>. And there is one tools called <a href="http://rubygems.org/gems/benchmark_suite" title="benchmark_suite">benchmark_suite</a>.</p>

<p>So there is this <a href="http://www.therubygame.com/challenges/3/submissions" title="Challenge #3">challenge</a> to capitalize first letter of every word. I want to compare my code to the fastest solution there.
so i installed the gem, also the <a href="http://rubygems.org/gems/ffi" title="ffi gem">ruby-ffi</a> gem that somewhat fix an error while I tried to run the benchmark.</p>

<p>so this is the code to benchmark it</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class='highlight ruby'><table><tr><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;benchmark/ips&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;The small brown &amp; ginger fox JUMPED OVER the gate&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="no">Benchmark</span><span class="o">.</span><span class="n">ips</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
</span><span class='line'>    <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">string</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">){</span><span class="o">|</span><span class="n">w</span><span class="o">|</span> <span class="n">w</span><span class="o">.</span><span class="n">capitalize</span><span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">x</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:capitalize</span><span class="p">)</span><span class="o">.</span><span class="n">join</span> <span class="s1">&#39; &#39;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>And here are the result</p>

<div class="well">
  <p>first 55609.3 (±10.7%) i/s - 277202 in 5.048175s (cycle=4471) </p>
  <p>second 77996.4 (±10.2%) i/s - 389844 in 5.055319s (cycle=6188)</p>
</div>


<p>The first code run <strong>55.609,3</strong> times per second and the latter is <strong>77.996,4</strong> times per second.
So the second code run more than the first code in one second. Which mean the second code is faster.</p>

<p>Also the first code run <strong>277.202</strong> times in <strong>5.048175</strong> sec while the second code run <strong>389.844</strong> times in <strong>5.05</strong> sec</p>

<p>So this mean, that <strong>regex is more slower</strong> then calling capitalized on each element on array</p>

        </div>
      </div>
      <div id="sidebar-wrapper" class="span3 <!-- sidebar-right -->">
        <div class="sidebar">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
      </div>
    </div>
  </div>
      
  <footer>
    <div class="container-fluid">
      <div class="row-fluid">
        <div id="footer-wrapper" class="span9 <!-- sidebar-right -->">
          <div class="footer">
            <p>
              &copy; Ahmy Yulrizka 2012. This site is made with <a href="http://jekyllrb.com/">Jekyll</a> 
              using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a> 
              and hosted on <a href="http://pages.github.com/">Github pages</a>.
              All of the content is open and the source can be accessed
              <a href="https://github.com/yulrizka/yulrizka.github.com/tree/source">here</a>
            </p>
          </div>
        </div>
      </div>
   </div>
  </footer>
</div> <!-- end of #container-->

<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/javascripts/jquery-1.7.1.min.js"><\/script>')</script>

<script src="/javascripts/application.js"></script>

</body>
</html>