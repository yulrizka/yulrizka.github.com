<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Recursive</title>
 <link href="http://labs.yulrizka.com/feed/" rel="self"/>
 <link href="http://labs.yulrizka.com/"/>
 <updated>2013-07-22T20:05:09+02:00</updated>
 <id>http://labs.yulrizka.com/</id>
 <author>
   <name>labs.yulrizka.com</name>
   <email>ahmy@yulrizka.com</email>
 </author>

 
 <entry>
   <title>berks upload core dump</title>
   <link href="http://labs.yulrizka.com/en/2013/07/berks-upload-ruby-core-dump.html"/>
   <updated>2013-07-21T23:26:00+02:00</updated>
   <id>http://labs.yulrizka.com/en/2013/07/berks-upload-ruby-core-dump</id>
   <content type="html">&lt;p&gt;Berksfhel is cookbook dependency for chef. If you are familiar with ruby / python,
think of it as a &lt;em&gt;Bundler&lt;/em&gt; or &lt;em&gt;virtual environment&lt;/em&gt; for chef&lt;/p&gt;

&lt;p&gt;I faced this core dump error while doing &lt;code&gt;berks upload&lt;/code&gt;. That command will actualy
push some cookbook to a chef server.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;berks upload
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;/home/user/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/celluloid-0.14.1/lib/celluloid/tasks.rb:47: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;BUG&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Segmentation fault
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;ruby 1.9.3p362 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2012-12-25 revision 38607&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;x86_64-linux&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;-- Control frame information -----------------------------------------------
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;c:0004 p:0112 s:0009 b:0007 l:002040 d:000006 BLOCK  /home/user/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/celluloid-0.14.1/lib/celluloid/tasks.rb:47
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;c:0003 p:0031 s:0005 b:0005 l:002108 d:000004 BLOCK  /home/user/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/celluloid-0.14.1/lib/celluloid/tasks/task_fiber.rb:11
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;c:0002 p:---- s:0003 b:0003 l:000002 d:000002 FINISH
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;c:0001 p:---- s:0001 b:-001 l:000000 d:000000 ------
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;-- Ruby level backtrace information ----------------------------------------
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;/home/user/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/celluloid-0.14.1/lib/celluloid/tasks/task_fiber.rb:11:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;block in create&lt;span class=&quot;s1&quot;&gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s1&quot;&gt;/home/user/.rbenv/versions/1.9.3-p362/lib/ruby/gems/1.9.1/gems/celluloid-0.14.1/lib/celluloid/tasks.rb:47:in `block in initialize&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;....
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;upgrading&lt;/strong&gt; the ruby verison to 2.0 seems to resolve my issue.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Safely sharing credentials with PGP</title>
   <link href="http://labs.yulrizka.com/en/2013/07/safely-sharing-credentials-with-pgp.html"/>
   <updated>2013-07-08T16:24:00+02:00</updated>
   <id>http://labs.yulrizka.com/en/2013/07/safely-sharing-credentials-with-pgp</id>
   <content type="html">&lt;p&gt;When working in teams, we are sometimes required to share some password / keys with our team.
The most common way for me is probably through email or some chat client. But even though its convenience it&#39;s not
actually a secure and a good practice. Especially if you are providing a service that deal with sensitive information.&lt;/p&gt;

&lt;p&gt;Some simple approach would we communicating the password directly with a person through secure medium.
One way to do it is both party ssh through a server and use talk client like &lt;a href=&quot;http://linux.die.net/man/1/write&quot;&gt;write&lt;/a&gt;.
But for some cases it&#39;s quite impractical.&lt;/p&gt;

&lt;h2&gt;PGP&lt;/h2&gt;

&lt;p&gt;Enter &lt;a href=&quot;http://en.wikipedia.org/wiki/Pretty_Good_Privacy&quot;&gt;PGP&lt;/a&gt;. It&#39;s basically a software that do a Public-key cryptography.
Public-key cryptography is basically encryption process which require 2 keys, one for encrypting and the other one
for decrypting. Usually the &lt;strong&gt;public key&lt;/strong&gt; is used for encrypting and &lt;strong&gt;private key&lt;/strong&gt; is use for decrypting.
I would not dive into the details about it since I&#39;ve only have basic understanding about it.
But for those people that is interested, you would read the nice article on &lt;a href=&quot;http://en.wikipedia.org/wiki/Public-key_cryptography&quot;&gt;wikipedia&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is a open source project called GPG (GNU Privacy Guard) and in this article I would like to show you how we could
share some password / key file with it.&lt;/p&gt;

&lt;h3&gt;Instalation&lt;/h3&gt;

&lt;p&gt;If you don&#39;t already have it on your system, you could installed it with:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo apt-get install gpg
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;After installing we would start by creating a pair of keys&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --gen-key
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;You will be asked with bunch of questions. Most of the answer you could leave it as a default but most important is fill in your &lt;strong&gt;email&lt;/strong&gt;
address and also provide a &lt;strong&gt;Passphrase&lt;/strong&gt; to protect your key with password. When it finish gathering information, it will start
creating a key pair by using system entropy. You can help the system to generate the entropy by clicking or moving your mouse randomly
or doing some random IO disk by triggering for example &lt;code&gt;find /&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;Listing keys&lt;/h3&gt;

&lt;p&gt;After installing, you can see list of keys by using this command&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt; gpg --list-keys
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;/home/user/.gnupg/pubring.gpg
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;--------------------------------
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;pub   2048R/70280895 2013-07-09
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;uid                  Ahmy Yulrizka &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ahmy135@mail.com&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &amp;lt;ahmy135@mail.com&amp;gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;sub   2048R/F7B2D44C 2013-07-09
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;In above output you could see that we have created public key with id of &lt;code&gt;70280895&lt;/code&gt;. Note this one because we are going to use it later
when submitting the key to a key server&lt;/p&gt;

&lt;h3&gt;Exporting keys&lt;/h3&gt;

&lt;p&gt;To share your public key, so other people could send you encrypted message.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; that further in this article I will discus ways to easily distribute your public key.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --armor --export &lt;span class=&quot;s1&quot;&gt;&amp;#39;ahmy135@mail.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;-----BEGIN PGP PUBLIC KEY BLOCK-----
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;Version: GnuPG v1.4.11 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;GNU/Linux&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;mQENBFHcRTEBCAC056qG97iJAtb604x5Hr+3lIi3UXVOnGauoHSo5S8S3bSCD0Ib
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;DzgSjWj8a6Xd1BY+5+HV0amp+i1sTknnd/C2WR7O1h9DIasPlWktPr2T+j4IGnYF
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;...
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;-----END PGP PUBLIC KEY BLOCK-----
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --armor --export &lt;span class=&quot;s1&quot;&gt;&amp;#39;ahmy135@mail.com&amp;#39;&lt;/span&gt; --output pubkey.txt &lt;span class=&quot;c&quot;&gt;# to output it to a file&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;h3&gt;Encrypting and decrypting&lt;/h3&gt;

&lt;p&gt;With those generated keys, we could now do a personal encryption. That is if you want to encrypt a file and you are the only one
who are able to decrypt it.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;this message is secret&amp;quot;&lt;/span&gt; &amp;gt; message.txt
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --encrypt --recipient &lt;span class=&quot;s1&quot;&gt;&amp;#39;ahmy135@gmail.com&amp;#39;&lt;/span&gt; message.txt
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Those code will create a file name &lt;code&gt;message.txt.gpg&lt;/code&gt; which is encrypted message of &lt;code&gt;message.txt&lt;/code&gt;&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --decrypt message.txt.gpg
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;You need a passphrase to unlock the secret key &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;user: &lt;span class=&quot;s2&quot;&gt;&amp;quot;Ahmy Yulrizka (ahmy135@mail.com) &amp;lt;ahmy135@mail.com&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;2048-bit RSA key, ID F7B2D44C, created 2013-07-09 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main key ID 70280895&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;gpg: gpg-agent is not available in this session
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;gpg: encrypted with 2048-bit RSA key, ID F7B2D44C, created 2013-07-09
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;s2&quot;&gt;&amp;quot;Ahmy Yulrizka (ahmy135@mail.com) &amp;lt;ahmy135@mail.com&amp;gt;&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;this message is secret
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;As you can see that we are successfully decrypted the message. This example you encrypt the message
using your own public key. So this method only work if you want to archive or backup the file securely.
In order to send someone else an encrypted message, you need to encrypt the message using the other
person &lt;strong&gt;public key&lt;/strong&gt;&lt;/p&gt;

&lt;h3&gt;Distributing the key&lt;/h3&gt;

&lt;p&gt;In order for any body to send you a encrypted message, you need to give your &lt;strong&gt;public key&lt;/strong&gt;.
Since &lt;strong&gt;public key&lt;/strong&gt; only used for encryption, It&#39;s OK to publicly share your &lt;strong&gt;public key&lt;/strong&gt;.
But never share your &lt;strong&gt;private key&lt;/strong&gt;. Once the other party have your &lt;strong&gt;public key&lt;/strong&gt; they could
start send you an encrypted message using the command above.&lt;/p&gt;

&lt;p&gt;You could share your public key manually to some one (through usb / email etc) by exporting it first just like I mention before.
But there are an easy way to distribute the key. There are some public GPG server that store your public key so that
other people could easily find it and import it into their local machine. There are &lt;a href=&quot;http://pgp.mit.edu&quot;&gt;http://pgp.mit.edu&lt;/a&gt;
and also ubuntu key server &lt;a href=&quot;http://keyserver.ubuntu.com&quot;&gt;http://keyserver.ubuntu.com&lt;/a&gt; that we can use.&lt;/p&gt;

&lt;p&gt;To send our key to MIT server we could do&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --send-key --keyserver pgp.mit.edu 70280895
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;gpg: sending key 70280895 to hkp server pgp.mit.edu
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;the last number &lt;code&gt;70280895&lt;/code&gt; was the key id of the public file. You could find it with the output of &lt;code&gt;gpg --list-keys&lt;/code&gt; command.
Now we have successfully send our public key any body could get your public key through that keyserver. You could test this
by searching a name or email or a person in the key server web interface. for example try searching my name on &lt;a href=&quot;http://pgp.mit.edu/&quot;&gt;http://pgp.mit.edu/&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;Importing Keys&lt;/h3&gt;

&lt;p&gt;Now to import other people public key, we could also do that in two way.&lt;/p&gt;

&lt;p&gt;if the person give you a file which contain their public key (say &lt;code&gt;ahmy-pub.key&lt;/code&gt;). you could import it with&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --import ahmy-pub.key
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Or if the person already publish his public key to a keyserver, we can search it with&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --search-keys &lt;span class=&quot;s1&quot;&gt;&amp;#39;Ahmy Yulrizka&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# or&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg --search-keys &lt;span class=&quot;s1&quot;&gt;&amp;#39;ahmy135@mail.com&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;It will generate a list of keys that found on the keyserver. Enter the number of the keys and it will be imported to your local machine.&lt;/p&gt;

&lt;p&gt;after importing you can send an encrypted message to the person for example&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;This is also a secret&amp;quot;&lt;/span&gt; | gpg --encrypt --armor --recipient &lt;span class=&quot;s1&quot;&gt;&amp;#39;Ahmy Yulrizka&amp;#39;&lt;/span&gt; &amp;gt; output.txt.gpg
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;You could provide a name or an email address as a recipient.
THis command will encrypt the message using public key of a person name &lt;code&gt;Ahmy Yulrizka&lt;/code&gt;&lt;/p&gt;

&lt;h2&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;At this point you are able to generate, export, distribute and import keys. More over you can already encrypt
and decrypt file / message to a designated recipient. The the part two of this article I will share some idea
how we could share some password / password key to other member of the team.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Homeward light indicator with RaspberryPi and CommonSense</title>
   <link href="http://labs.yulrizka.com/en/2013/02/homeward-light-indicator-with-raspberrypi-and-commonsense.html"/>
   <updated>2013-02-26T20:33:00+01:00</updated>
   <id>http://labs.yulrizka.com/en/2013/02/homeward-light-indicator-with-raspberrypi-and-commonsense</id>
   <content type="html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;span8 offset1&quot;&gt;
    &lt;iframe align=&quot;center&quot; width=&quot;628&quot; height=&quot;400&quot; src=&quot;http://www.youtube.com/embed/35ylS4IX_mc&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;br/&gt;


&lt;p&gt;I&#39;ve been tinkering with my &lt;a href=&quot;http://www.raspberrypi.org/&quot;&gt;raspberry-pi&lt;/a&gt; for quite some time now. What I like about it because it is cheap ($25),
it&#39;s run Linux (especially debian based) and most of all it&#39;s have General Purpose Input Output pin. Since I was a kid, I always
wanted to control electronic appliance remotely. Luckily my friend &lt;a href=&quot;https://github.com/pimnijdam&quot;&gt;@pimnijdam&lt;/a&gt; thought me how to control a relay board.
Basically it&#39;s just like an electric switch that connect/disconnect current when you supply a low voltage.&lt;/p&gt;

&lt;p&gt;So I connect one of the GPIO pin to the relay board and from the relay board to the lamp. Now I can control the desk lamp through
my raspberry-pi by issuing a linux command. Had been successfully doing this, I wanted to the lamp not only from the raspberry pi
but anywhere. The easiest way that I could think of is running a web server inside the raspberry-pi. The debian repository is
quite awesome. So I could install a ruby/python and it only took a single command.&lt;/p&gt;

&lt;p&gt;So I did create a &lt;a href=&quot;https://github.com/yulrizka/pi-sinatra-gpio/blob/master/app.rb&quot;&gt;project&lt;/a&gt;  with ruby/sinatra to control this light. Its really small (30 lines of code, 80 lines html + js) and with this project I can control up to 3 light, one of those eventually control the light. In case you are interested, I put the source on &lt;a href=&quot;https://github.com/yulrizka/pi-sinatra-gpio/blob/master/app.rb&quot;&gt;github&lt;/a&gt;.
This project uses &lt;a href=&quot;https://github.com/jwhitehorn/pi_piper&quot;&gt;pi-piper&lt;/a&gt; a ruby library that wrap &lt;a href=&quot;https://projects.drogon.net/raspberry-pi/wiringpi/&quot;&gt;wiringPi&lt;/a&gt;, which is library that is used to control the GPIO pin.&lt;/p&gt;

&lt;div class=&quot;row&quot;&gt;
&lt;div class=&quot;span8 offset1&quot;&gt;
&lt;div class=&quot;thumbnail&quot;&gt;
  &lt;img src=&quot;/images/post/2013/02/homeward-indicator-project.jpg&quot;&gt;
  &lt;div class=&quot;caption&quot;&gt;
    The light will turn on whenever I leave the office at noon.
  &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;br/&gt;




&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;span4 offset1&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;img src=&quot;/images/post/2013/02/lamp-off.jpg&quot;&gt;
      &lt;div class=&quot;caption&quot;&gt;
        Controlling Lamp with Raspberry-pi + ruby/sinatra
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;span4&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;img src=&quot;/images/post/2013/02/lamp-on.jpg&quot;&gt;
      &lt;div class=&quot;caption&quot;&gt;
        The phone open a web browser to the raspberry pi
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;br/&gt;


&lt;p&gt;Now, turning a desk lamp with pi is something; But it&#39;s quite boring and not really useful. Now let us make something a bit
interesting. Instead of controlling it manually, The light be trigger on my activity. In this case I the light to turn on
when ever I came back from the office on every working day. So at home my wife know exactly when I leave the office. I already
have it running a web server, so basically I can control it from my mobile phone. But I don&#39;t want to do this every single day.
And this is where &lt;a href=&quot;http://www.sense-os.nl/commonsense&quot;&gt;ComonSense&lt;/a&gt; really makes thing easy for me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sense-os.nl/commonsense&quot;&gt;CommonSense&lt;/a&gt; is a platform to store, retrieve, analyze and interpret our sensory data. What is a sensor ? well anything could be a sensor. From physical sensor on our mobile phone like accelerometer, noise, position, cell network, light, ambience and more sophisticated sensor like sensor that tell your quality of sleep. By using one or more sensor, it could create more intelligent sensor. For example a sensor that tell wether you are standing or sitting by analyzing the accelerometer data. CommonSense is Awesome!, but for this experiment we will be using a simple location sensor. It will tell where is my current location by GPS or
wifi-network.&lt;/p&gt;

&lt;p&gt;What is make it easy is I don&#39;t have to create an application on my mobile phone. CommonSense already have a platform that run on
&lt;a href=&quot;https://play.google.com/store/apps/details?id=nl.sense_os.app&quot;&gt;Android&lt;/a&gt; or &lt;a href=&quot;https://itunes.apple.com/nl/app/senseplatform/id447552125?mt=8&amp;amp;uo=4&quot;&gt;iOs&lt;/a&gt;. The application act as an agent that collect and sample sensor data from the mobile phone. By it self it&#39;s not really doing much right now but combine with the &lt;a href=&quot;http://www.sense-os.nl/commonsense&quot;&gt;CommonSense&lt;/a&gt; make it really easy for a developer like me to
easily experiment with my data. So with this sense app, the raspberry-pi could easily get data from my mobile phone through the
&lt;a href=&quot;http://developer.sense-os.nl&quot;&gt;CommonSense API&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;span3 offset1&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;img src=&quot;/images/post/2013/02/sense-app.jpg&quot;&gt;
      &lt;div class=&quot;caption&quot;&gt;
        Sense Android App - Works as an aggent of CommonSense
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;span7&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;img src=&quot;/images/post/2013/02/biking-out-of-the-office.jpg&quot;&gt;
      &lt;div class=&quot;caption&quot;&gt;
        The light will turn on when I&#39;m 200m away from the office
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;br/&gt;


&lt;p&gt;Again, my awesome colleague &lt;a href=&quot;https://github.com/pimnijdam&quot;&gt;@pim&lt;/a&gt; create a prototype of &lt;a href=&quot;https://github.com/pimnijdam/eventScripting&quot;&gt;python framework&lt;/a&gt; that make it very easy for me to
implement my project. You should definitely &lt;a href=&quot;https://github.com/pimnijdam/eventScripting&quot;&gt;chek it out!&lt;/a&gt;. I&#39;ve created the &lt;em&gt;homeward light indicator&lt;/em&gt; project
using the early version of the framework. This is actually my first encounter with Python. Although I still prefer doing my
project with Ruby, I&#39;m really enjoying working with Python.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Scale MongoDB dengan Sharding</title>
   <link href="http://labs.yulrizka.com/id/2012/03/scale-mongodb-dengan-sharding.html"/>
   <updated>2012-03-07T12:16:00+01:00</updated>
   <id>http://labs.yulrizka.com/id/2012/03/scale-mongodb-dengan-sharding</id>
   <content type="html">&lt;div class=&quot;alert alert-success&quot;&gt;
  &lt;span class=&quot;label label-success&quot; &gt;TL;DR&lt;/span&gt;
  Proses &lt;em&gt;Horizontal Partitioning&lt;/em&gt; pada MongoDB melibatkan suatu konsep &lt;em&gt;Chunk&lt;/em&gt; dimana data dibagi menjadi beberapa chunk sesuai dengan suatu
  &lt;em&gt;shard key&lt;/em&gt;. Artikel ini membahas bagaimana melakukan sharding pada mongodb
&lt;/div&gt;


&lt;h2&gt;Introduksi&lt;/h2&gt;

&lt;p&gt;MongoDB adalah salah satu NoSQL database yang cukup populer. MongoDB merupakan document store database, dimana data disimpan dalam format
BSON atau mirip dengan JSON. Keunggulan mongoDB antara lain adalah automatic sharding. Artinya apabila kita memiliki beberapa server database,
kita dapat melakukan partisi terhadap data tersebut dan mongo akan melakukan load balancing terhadap data tersebut secara automatis&lt;/p&gt;

&lt;p&gt;Sebelum mengeksplorasi mongodb, ada beberapa konsep yang harus kita pahami tentang mongo. yaitu:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Mongod&lt;/li&gt;
&lt;li&gt;Replicas&lt;/li&gt;
&lt;li&gt;Shards&lt;/li&gt;
&lt;li&gt;Shard Keys&lt;/li&gt;
&lt;li&gt;Chunks&lt;/li&gt;
&lt;li&gt;Config DB Process (config server)&lt;/li&gt;
&lt;li&gt;Routing Process (mongos)&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;row&quot;&gt;
  &lt;a href=&quot;http://www.mongodb.org/display/DOCS/Sharding+Introduction&quot; class=&quot;thumbnail span7 offset2&quot;&gt;
    &lt;img src=&quot;http://www.mongodb.org/download/attachments/2097393/sharding.PNG?version=2&amp;modificationDate=1267724627656&quot;/&gt;
    &lt;h5&gt;Skema Sharding - MongoDB Sharding Introduction&lt;/h5&gt;
  &lt;/a&gt;
&lt;/div&gt;


&lt;h3&gt;mongod&lt;/h3&gt;

&lt;p&gt;mongod adalah core dari mongoDB. mongod adalah satu instance server mongo. Saya sendiri tidak tau kepanjangan dari mongod tapi kalau menebak,
mungkin yang dimaksud adalah mongo daemon. Kalau di analogikan, 1 mongod adalah 1 server database (misalkan sama dengan 1 server mysql). Sehingga
satu aplikasi sedehana cukup dibuat dengan 1 application server yang berkomunikasi dengan 1 mongod&lt;/p&gt;

&lt;h3&gt;Replica&lt;/h3&gt;

&lt;p&gt;Replica set adalah suatu bentuk Master/slave database. 1 replika terdiri dari 2 atau lebih proses mongod yang memiliki data yang sama.
Replica bertujuan untuk &lt;em&gt;failover&lt;/em&gt;, &lt;em&gt;reducancy&lt;/em&gt; juga sebagai &lt;em&gt;distribution read load&lt;/em&gt;
. Artinya apabila terdapat beberapa request read terhadap data yang sama, maka request tersebut bisa di handle oleh lebih dari satu server&lt;/p&gt;

&lt;p&gt;Contoh, misalkan kita mempunyai 3 data center: Jakarta, Bandung dan Surabaya. maka kita dapat membentuk replika sebagai berikut.&lt;/p&gt;

&lt;div class=&quot;row&quot;&gt;
  &lt;div style=&quot;text-align: center&quot;&gt;
    &lt;table class=&quot;table table-striped table-bordered table-condensed span5&quot;&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;td&gt;&lt;/td&gt;&lt;td&gt;Replica-1&lt;/td&gt;&lt;td&gt;Replica-2&lt;/td&gt;&lt;td&gt;Replica-3&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Jakarta&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Bandung&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Surabaya&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
          &lt;td&gt;mongod&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;h3&gt;Shards&lt;/h3&gt;

&lt;p&gt;Dalam database kita dapat melakukan partisi terhadap data. Partisi tersebut bisa dilakukan dalam dua arah: Vertikal dan Horizontal. Vertical
dilakukan dengan membagi data berdasarkan kolom, misalkan melalui proses denormalisasi. Sedangkan &lt;em&gt;horizontal partitioning&lt;/em&gt; dilakukan dengan
membagi data secara horizontal.&lt;/p&gt;

&lt;p&gt;Contoh horizontal partitioning misalkan kita memiliki data center seperti diatas. Maka kita dapat menyimpan semua data user jakarta ke data
center jakarta, bandung ke bandung dan lainya ke surabaya. Apabila terdapat request terhadap data bandung maka cukup server bandung yang melayani
data tersebut.&lt;/p&gt;

&lt;p&gt;Shard dalam mongoDB teridiri dari beberapa server (mongod). Beberapa server tersebut dalam shard membentuk replika set. sehingga dapat kita katakan
suatu replika set berada pada suatu sharding.&lt;/p&gt;

&lt;h3&gt;shard key&lt;/h3&gt;

&lt;p&gt;Untuk membagi-bagi suatu data, maka dibutuhkan suatu &lt;em&gt;key&lt;/em&gt; yang menentukan data tersebut akan masuk ke shard yang mana. Key tersebut disebut dengan
&lt;strong&gt;shard key&lt;/strong&gt;. untuk contoh diatas &lt;em&gt;shard key&lt;/em&gt; adalah lokasi. Pada contoh lain kita dapat membuat email sebagai &lt;em&gt;shard key&lt;/em&gt;. sehingga data suatu
user akan dikelompokkan pada suatu shard yang sama.&lt;/p&gt;

&lt;p&gt;Pemilihan &lt;em&gt;shard key&lt;/em&gt; sangat bergantung dengan bagaimana cara aplikasi berintarksi untuk mengakses data. Sehingga pemilihan &lt;em&gt;shard key&lt;/em&gt; dapat
mempengaruhi performa dari sistem. Pemilihan &lt;em&gt;shard key&lt;/em&gt; yang salah dapat menyebabkan database beroperasi lebih lambat dari &lt;em&gt;single instance&lt;/em&gt;
database.&lt;/p&gt;

&lt;p&gt;Untuk kriteria pemilihan &lt;em&gt;shard key&lt;/em&gt; dapat dilihat pada artikel &lt;a href=&quot;http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key&quot;&gt;&lt;em&gt;Choosing a shard key&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;Chunks&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Chunk&lt;/em&gt; adalah &lt;em&gt;continuous range of data for a particular collection&lt;/em&gt;. Misalkan kita melakukan partisi data berdasarkan ID. dan ID tersebut
merupakan bilangan integer antara 1..1000. Kita dapat membagi data tersebut dalam beberapa bagian (chunk) dengan ukuran yang sama. Secara
default ukuran 1 &lt;em&gt;chunk&lt;/em&gt; dalam mongoDB adalah 64MB (meskipun bisa dikonfigurasi). Untuk contoh kasus data tersebut bisa dibagi menjadi 10 chunk.
dengan:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;chunk-1: 1..100&lt;/li&gt;
&lt;li&gt;chunk-2: 101..200&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;li&gt;chunk-10: 901..1000&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suatu Chunk disimpan pada suatu shard tertentu. Keistimewaan mongoDB salah satunya adalah auto sharding. Artinya suatu chunk dapat di transfer
dari suatu shard ke shard yang lain.&lt;/p&gt;

&lt;p&gt;Misalkan contoh diatas, 3 shard. Pada shard pertama terdapat 10 chunk. MongoDB akan melakukan balancing dengan melakukan transfer ke 2 shard
yang lain sampai ukuran chunk pada tiap shard menjadi seimbang. Hal ini dilakukan secara automatis, meskipun kita juga dapat melakukannya secara
manual.&lt;/p&gt;

&lt;h3&gt;Config DB Process (Config server)&lt;/h3&gt;

&lt;p&gt;Selain mongod, dalam proses sharding dibutuhkan suatu prosess (program) yang bertugas untuk menyimpan informasi mengenai shard-server dan chunk
didalam shard tersebut. informasi tersebut dikenal dengan meta-data. Kita dapat menjalankan 1 atau 3 &lt;em&gt;Config Server&lt;/em&gt;. Tentu pada production
dibutuhkan 3 config server. Ketika satu mati maka masih tersisa 2 cadangan &lt;em&gt;Config server&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Tidak seperti mongod, &lt;em&gt;Config Server&lt;/em&gt; tidak berkomunikasi antara satu dengan yang lain. Ketika satu proses mati, biasanya dihidupkan dengan
melakukan restore terhadap dump dari server yang lain. Ketika server ini mati.&lt;/p&gt;

&lt;h3&gt;Routing Process (mongos)&lt;/h3&gt;

&lt;p&gt;Selain mongod dan &lt;em&gt;config server&lt;/em&gt;, element lain yang penting adalah &lt;strong&gt;mongos&lt;/strong&gt;. Fungsi utama dari mongos adalah melakukan routing terhadap
request ke shard yang memiliki data tersebut. Pada saat aplikasi ini dijalankan. ia akan mengambil data dari &lt;em&gt;config server&lt;/em&gt;. Aplikasi yang
kita miliki berkomunikasi layaknya dengan server database biasa. Misalkan sebelumnya aplikasi kita setup ke url mongod, sekarang setelah
kita melakukan konfigurasi pada sharding, kita cukup mengarahkan url ke proses mongos.&lt;/p&gt;

&lt;p&gt;Proses mongos ini relativ lebih kecil. Kadang kita dapat menjalankan mongos pada server aplikasi kita. Ada juga yang menjalankan proses mongos
di mesin yang sama dengan mongod.&lt;/p&gt;

&lt;h2&gt;Implementasi&lt;/h2&gt;

&lt;p&gt;Ok, setelah kita mengerti beberapa konsep mengenai sharding, mari kita membuat suatu contoh kasus bagaimana melakukan implementasi terhadap
sharding berikut. Untuk kemudahan, maka semua &lt;em&gt;instance&lt;/em&gt; server ktia letakkan pada server yang sama (localhost). Hal ini berlaku untuk
mongod, Config Server, mongos dan server aplikasi.&lt;/p&gt;

&lt;p&gt;Pada contoh kasus ini kita akan menjalankan beberpa server sebagai berikut&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;2 Monogod. port 10000 &amp;amp; 10001&lt;/li&gt;
&lt;li&gt;1 Config Server. port 20000&lt;/li&gt;
&lt;li&gt;1 Mongos&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;Mongod&lt;/h3&gt;

&lt;p&gt;Dalam kasus ini, saya berasumsi anda telah melakukan instalasi terhadap mongo server. Untuk menjalankan 2 proses mongod, jalankan perintah berikut&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkdir a b
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c&quot;&gt;# jalankan instance pertama&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mongod --shardsvr --dbpath &lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/a --port 10000 &amp;gt; /tmp/sharda.log &amp;amp;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /tmp/sharda.log &lt;span class=&quot;c&quot;&gt;# pastikan process tersebut berjalan&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c&quot;&gt;# jalankan instance kedua&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mongod --shardsvr --dbpath &lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/b --port 10001 &amp;gt; /tmp/shardb.log &amp;amp;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /tmp/shardb.log &lt;span class=&quot;c&quot;&gt;# pastikan process tersebut berjalan&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;h3&gt;Configuration Server &amp;amp; Mongos&lt;/h3&gt;

&lt;p&gt;Berikutnya yang kita lakukan adalah menjalankan Configuration server dan Mongos dengan perintah berikut&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkdir config
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c&quot;&gt;# start config server&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mongod --configsvr --dbpath &lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/config --port 20000 &amp;gt; /tmp/configdb.log &amp;amp;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /tmp/configdb.log &lt;span class=&quot;c&quot;&gt;# pastikan server berjalan&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c&quot;&gt;# start mongos&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mongos --configdb localhost:20000 --chunkSize 1 &amp;gt; /tmp/mongos.log &amp;amp;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;cat /tmp/mongos.log &lt;span class=&quot;c&quot;&gt;# pastikan server tersebut berjalan&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;pada contoh diatas, mongos tidak membutuhkan &lt;code&gt;--dbpath&lt;/code&gt;, karena mongo tidak memerlukan &lt;em&gt;persistance&lt;/em&gt; (penyimpanan data). Perintah &lt;code&gt;mongos&lt;/code&gt; diatas
akan menjalankan mongos pada port default (sama serperti port default mongod) yaitu 27017&lt;/p&gt;

&lt;p&gt;&lt;code&gt;--chinkSize 1&lt;/code&gt; merupakan opsi untuk menentukan ukuran chunk 1MB (defaultnya 64MB). Hal ini bertujuan untuk explorasi saja. sehingga kita tidak
perlu memassukkan data berukuran 64MB untuk membuat satu chuck baru.&lt;/p&gt;

&lt;h2&gt;Setup Cluster&lt;/h2&gt;

&lt;p&gt;Sampai tahap ini yang telah kita lakukan adalah mejalankan 2 &lt;em&gt;process&lt;/em&gt; mongod, 1 &lt;em&gt;process config server&lt;/em&gt; dan 1 &lt;em&gt;process&lt;/em&gt; mongos. Berikutnya
yang kita lakukan adalah melakukan setup agar server tersebut dapat saling berkomunikasi.&lt;/p&gt;

&lt;h3&gt;Konfigurasi Shard Server pada mongos&lt;/h3&gt;

&lt;p&gt;Berikutnya yang kita lakukan adalah setup mongos agar menambahkan 2 shard server yang berjalan pada port 10000 &amp;amp; 10001.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mongo
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;MongoDB shell version: 1.8.2
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;connecting to: &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&amp;gt; use admin
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;switched to db admin
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&amp;gt; db.runCommand&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; addshard: &lt;span class=&quot;s2&quot;&gt;&amp;quot;localhost:10000&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;shardAdded&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0000&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&amp;gt; db.runCommand&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; addshard: &lt;span class=&quot;s2&quot;&gt;&amp;quot;localhost:10001&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;shardAdded&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0001&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Berikutnya, kita set agar server tersebut dalam mode sharding pada database test. Setelah itu kita akan menambahkan sharding pada &lt;em&gt;collection&lt;/em&gt; &lt;em&gt;people&lt;/em&gt; dengan
&lt;em&gt;shard key&lt;/em&gt; &lt;em&gt;email&lt;/em&gt;. Meskipun pada tahap ini kita belum memiliki &lt;em&gt;people Collection&lt;/em&gt;&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.runCommand&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; enablesharding: &lt;span class=&quot;s2&quot;&gt;&amp;quot;test&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.runCommand&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; shardcollection: &lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;, key: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;email: 1&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;collectionsharded&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; use &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; show collections
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Oke kita cek dulu apakah ukuran chuck sudah 1 MB, apabila belum kita ubah menjadi 1 MB&lt;/p&gt;

&lt;div class=&quot;alert alert-info&quot;&gt;
  Entah mengapa parameter --chunkSize 1 tidak mengubah ukuran chunk, oleh karena itu kita ubah dari database
&lt;/div&gt;




&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; use config
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  switched to db config
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; show collections
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  changelog
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  chunks
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  collections
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  databases
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  lockpings
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  locks
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  mongos
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  settings
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  shards
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  system.indexes
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  version
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.settings.find&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;chunksize&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt; : 64 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.settings.save&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;_id:&lt;span class=&quot;s2&quot;&gt;&amp;quot;chunksize&amp;quot;&lt;/span&gt;, value: 1&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.settings.find&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;chunksize&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Perhatikan bahwa perintah terakhir tidak menghasilkan apa-apa karena kita memang belum memiliki collection.&lt;/p&gt;

&lt;p&gt;Ok, sampai tahap ini kita telah selesai melakukan shard terhadap server tersebut&lt;/p&gt;

&lt;h2&gt;Let&#39;s Play&lt;/h2&gt;

&lt;p&gt;Sekarang saatnya kita melakukan percobaan dengan shard dan chunk.&lt;/p&gt;

&lt;h3&gt;Tambahkan data pada collection&lt;/h3&gt;

&lt;p&gt;Pertama-tama kita coba untuk menambahkan 1 collection dan melihat ukuran collection tersebut.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; use &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nb&quot;&gt;  &lt;/span&gt;switched to db &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.save&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; name: &lt;span class=&quot;s2&quot;&gt;&amp;quot;Person test&amp;quot;&lt;/span&gt;, email: &lt;span class=&quot;s2&quot;&gt;&amp;quot;test@foo.com&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.find&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : ObjectId&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;4f5742cc580bd77a9d9ec6d6&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;test@foo.com&amp;quot;&lt;/span&gt;, &lt;span class=&quot;s2&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;Person test&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.dataSize&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  68
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.totalSize&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  24576
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Dapat dilihat pada hasil diatas bahwa kita telah memasukkan 1 dokumen pada &lt;em&gt;collection&lt;/em&gt; people dan untuk 1 dokumen kita memerlukan 68 byte.
Ingat bahwa pada contoh diatas, kita menetapkan ukuran 1 chunk adalah 1MB (1024 byte). Skarang kita coba untuk memasukan data sehingga ukuran
data menjadi 3 chuck&lt;/p&gt;

&lt;p&gt;Mari kita tambahkan record (dokumen) sebanyak 20000.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;var &lt;span class=&quot;nv&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1; i &amp;lt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 20000; i++&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  ...   var &lt;span class=&quot;nv&quot;&gt;person_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Person #&amp;quot;&lt;/span&gt; + i;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  ...   var &lt;span class=&quot;nv&quot;&gt;person_email&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;email-&amp;quot;&lt;/span&gt; + i + &lt;span class=&quot;s2&quot;&gt;&amp;quot;@foo.com&amp;quot;&lt;/span&gt;;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  ...   db.people.save &lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; name: person_name, email: person_email &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  ... &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.totalSize&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  6776064
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.people.dataSize&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  1559608
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;h3&gt;Melihat informasi jumlah shard&lt;/h3&gt;

&lt;p&gt;untuk melihat informasi shard dapat kita lakukan dalam perintah berikut.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; use admin
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  switched to db admin
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.runCommand&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; listshards: 1&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;s2&quot;&gt;&amp;quot;shards&amp;quot;&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;          &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;              &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0000&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;              &lt;span class=&quot;s2&quot;&gt;&amp;quot;host&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;localhost:10000&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;          &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;              &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0001&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;              &lt;span class=&quot;s2&quot;&gt;&amp;quot;host&amp;quot;&lt;/span&gt; : &lt;span class=&quot;s2&quot;&gt;&amp;quot;localhost:10001&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;h3&gt;Melihat informasi Chunk&lt;/h3&gt;

&lt;p&gt;Untuk melihat informasi chunk, dan di shard mana chunk itu disimpan, lakukan perintah berikut&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;37&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;38&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;39&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;40&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;41&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;42&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;43&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;44&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;45&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;46&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;47&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;48&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;49&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;50&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; use config
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  switched to db config
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.chunks.find&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_MinKey&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:2000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:0
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;           &lt;span class=&quot;nv&quot;&gt;$minKey&lt;/span&gt;:1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-10000@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0001&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_\&amp;quot;email-10000@foo.com\&amp;quot;&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:2000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:2
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-10000@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-9@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0000&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_\&amp;quot;email-9@foo.com\&amp;quot;&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:2000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:3
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-9@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;           &lt;span class=&quot;nv&quot;&gt;$maxKey&lt;/span&gt;:1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0000&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;dari data diatas kita dapat melihat bahwa terdapat 3 chunk:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;test.people-email_MinKey berada pada shard0001&lt;/li&gt;
&lt;li&gt;test.people-email_\&quot;email-10000@foo.com\&quot; berada pada shard0000&lt;/li&gt;
&lt;li&gt;test.people-email_\&quot;email-9@foo.com\&quot; berada pada shard0000&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;MongoDB ternyata melakukan partisi terhadap &lt;em&gt;shard key&lt;/em&gt; dengan memperlakukan key tersebut sebagai string.&lt;/p&gt;

&lt;h3&gt;Memindahkan Chunk ke shard lain&lt;/h3&gt;

&lt;p&gt;Misalkan pada contoh diatas kita ingin memindahkan chunk &lt;code&gt;test.people-email_\&quot;email-9@foo.com\&quot; berada pada shard0000&lt;/code&gt; dari shard0000 je shard0001. Hal tersebut
dapat dilakukan dengan perintah berikut&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;37&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;38&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;39&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;40&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;41&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;42&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;43&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;44&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;45&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;46&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;47&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;48&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;49&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;50&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;51&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.adminCommand&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; moveChunk: &lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;, find: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;email: &lt;span class=&quot;s2&quot;&gt;&amp;quot;email-9@foo.com&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;, to: &lt;span class=&quot;s1&quot;&gt;&amp;#39;shard0001&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;millis&amp;quot;&lt;/span&gt; : 1038, &lt;span class=&quot;s2&quot;&gt;&amp;quot;ok&amp;quot;&lt;/span&gt; : 1 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt; db.chunks.find&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_MinKey&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:2000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:0
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;           &lt;span class=&quot;nv&quot;&gt;$minKey&lt;/span&gt;:1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-10000@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0001&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_\&amp;quot;email-10000@foo.com\&amp;quot;&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:3000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-10000@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-9@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0000&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;_id&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people-email_\&amp;quot;email-9@foo.com\&amp;quot;&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;lastmod&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;t&amp;quot;&lt;/span&gt;:3000,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;i&amp;quot;&lt;/span&gt;:0
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;ns&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;test.people&amp;quot;&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;min&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;email-9@foo.com&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;max&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;s2&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;           &lt;span class=&quot;nv&quot;&gt;$maxKey&lt;/span&gt;:1
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;s2&quot;&gt;&amp;quot;shard&amp;quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&amp;quot;shard0001&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Dari data diatas kita bisa melihat bahwa chunk tersebut sudah pindah dari shard0000 ke sahrd00001&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Ruby Fiber apaan sih ?</title>
   <link href="http://labs.yulrizka.com/id/2012/02/ruby-fiber-apaan-sih.html"/>
   <updated>2012-02-29T15:17:00+01:00</updated>
   <id>http://labs.yulrizka.com/id/2012/02/ruby-fiber-apaan-sih</id>
   <content type="html">&lt;blockquote&gt;
  &lt;p&gt;
    Fibers are light-weight (green) &lt;a href=&quot;http://en.wikipedia.org/wiki/Thread_(computing)&quot; alt=&quot;wiki Thread (Computing)&quot;&gt;
      threads&lt;/a&gt; with manual, cooperative scheduling, rather than the preemptive scheduling 
    of Ruby 1.8&#39;s threads. Since Ruby 1.9&#39;s threads exist at the system level, fibers are, in a way, 
    Ruby 1.9&#39;s answer to Ruby 1.8&#39;s green threads, but lacking the pre-emptive scheduling
  &lt;/p&gt;
  &lt;small&gt;
    &lt;a href=&quot;http://www.rubyinside.com/ruby-fibers-8-useful-reads-on-rubys-new-concurrency-feature-1769.html&quot;&gt;
      rubyinside.com
    &lt;/a&gt;
  &lt;/small&gt;
&lt;/blockquote&gt;




&lt;h2&gt;Thread&lt;/h2&gt;


&lt;p&gt;Untuk dapat mengerti mengenai fiber, sebelumnya kita harus memahami thread. Suatu (&lt;em&gt;instance&lt;/em&gt;) program yang sedang berjalan
disebut dengan proses. thread adalah unit proses (potongan kode) yang dapat dijalankan secara simultan. Jadi sekan-akan
program tersebut bercabang.&lt;/p&gt;

&lt;p&gt;Ambil contoh program Web Server yang diimplementasi menggunakan thread. Fungsi Web Server (WS) adalah menerima request dan
memberikan response kepada web browser. Misalkan WS tersebut hanya memiliki 1 proses, maka apabila ada 10 user yang melakukan
request, maka mereka harus mengantri untuk menerima response dari server. Hal ini bisa diatasi salah satunya dengan menggunakan
thread. Apabila terdapat suatu request, maka proses utama membuat (&lt;em&gt;spawn&lt;/em&gt;) suatu thread untuk menangani request tersebut.
Misalkan ada 10 request disaat yang bersamaan, maka terdapat 10 thread yang jalan disaat yang bersamaan. Dalam kasus ini
maka 10 user tersebut akan dilayani pada waktu yang bersamaan.&lt;/p&gt;

&lt;p&gt;Ruby 1.8.7 (MRI) memiliki tipe &lt;em&gt;green thread&lt;/em&gt;, yaitu thread yang dikelola oleh &lt;em&gt;Virtual Machine&lt;/em&gt; sedangkan normalnya thread
dikelola oleh &lt;em&gt;Operating System&lt;/em&gt; (OS) atau &lt;em&gt;native thread&lt;/em&gt;. Namun implementasi threads untuk tiap interpreter berbeda. Misalkan
pada JRuby dan Rubinius yang menggunakan native threads.&lt;/p&gt;

&lt;p&gt;Eksekusi setiap threads dikelola oleh program yang dinamakan &lt;em&gt;scheduler&lt;/em&gt;. &lt;em&gt;preemptive scheduling&lt;/em&gt; adalah suatu metode
yang digunakan &lt;em&gt;scheduler&lt;/em&gt; dengan memanfaatkan &lt;em&gt;interrupt&lt;/em&gt;. Artinya scheduler mengirimkan &lt;em&gt;interrupt&lt;/em&gt; kepada suatu thread
untuk berhenti dan menjalankan thread lain. secara default MRI menggunakan &lt;em&gt;fair scheduler&lt;/em&gt;. Artinya masing-masing thread
akan dijadwalkan (dijalankan) dengan waktu yang sama.&lt;/p&gt;

&lt;h2&gt;Fiber&lt;/h2&gt;


&lt;p&gt;Fiber adalah fitur yang pertamakali diperkenalkan pada ruby 1.9 (Meskipun ada hack untuk ruby 1.8.{67}).
Fiber mirip dengan thread. Namun pada fiber, user yang memiliki kontrol terhadap eksekusi kode, bukan &lt;em&gt;scheduler&lt;/em&gt;.
setiap fiber memiliki 4Kb memori sehingga cukup &quot;murah&quot; untuk dibuat. Berikut adalah contoh dari (igvita.com).&lt;/p&gt;

&lt;p&gt;Terdapat 2 thread: Thread pertama melakukan io-blocking selama 40ms dan komputasi 10ms. sedangkan
thread kedua melakukan 50ms komputasi.&lt;/p&gt;

&lt;p&gt;Berikut adalah implementasi dalam thread dan juga fiber:&lt;/p&gt;

&lt;div class=&quot;thumbnail&quot;&gt;
  &lt;img src=&quot;http://www.igvita.com/posts/09/fibers-vs-threads.png&quot;&gt;&lt;/img&gt;
  &lt;div class=&quot;caption&quot;&gt;
    Komparasi kode yang dijalankan menggunakan thread &amp; fiber. 
    &lt;a href=&quot;http://www.igvita.com/2009/05/13/fibers-cooperative-scheduling-in-ruby/&quot;&gt;http://www.igvita.com/2009/05/13/fibers-cooperative-scheduling-in-ruby/&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;br/&gt;


&lt;p&gt;Pada contoh pertama, thread 2 memakan waktu 100ms, sedangkan pada contoh yang kedua hanya memakan waktu 60ms.&lt;/p&gt;

&lt;p&gt;Dengan menggunakan fiber, program berjalan sekan-akan sychronous (blocking). Oleh karena itu fiber
merupakan kandidat yang cocok untuk diterapkan pada pemograman &lt;em&gt;Event-Driven&lt;/em&gt; atau &lt;em&gt;Asynchronous programming&lt;/em&gt; seperti
pada &lt;em&gt;EventMachine&lt;/em&gt; di ruby&lt;/p&gt;

&lt;h2&gt;Cara Menggunakan Fiber&lt;/h2&gt;


&lt;p&gt;Untuk dapat memahami fiber, kita ambil contoh seperti berikut. Program ini sebenarnya tidak berguna, tapi cukup untuk
mendemonstrasikan alur penggunaan fiber&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight ruby&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;fiber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Fiber: Beginning of fiber&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;no&quot;&gt;Fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# kembalikan eksekusi ke main (line 11)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Fiber: Halo main, saya fiber&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;no&quot;&gt;Fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# kembalikan eksekusi ke main (line 13)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;no&quot;&gt;Fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Fiber: Sekarang &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Main: Beginning main&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resume&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# jalankan fiber (line 2)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Main: Hello saya main thread&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resume&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# jalankan fiber (line 4)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Main: Sekarang jam berapa ya ?&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fiber&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resume&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# jalankan fiber (line 6) dan output hasil  &lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;pre&gt;&lt;code&gt; Main: Beginning main
 Fiber: Beginning of fiber
 Main: Hello saya main thread
 Fiber: Halo main, saya fiber
 Main: Sekarang jam berapa ya ?
 Fiber: Sekarang 2012-02-29 22:45:08 +0700
&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Responsive Design</title>
   <link href="http://labs.yulrizka.com/en/2012/02/responsive-design.html"/>
   <updated>2012-02-24T01:48:00+01:00</updated>
   <id>http://labs.yulrizka.com/en/2012/02/responsive-design</id>
   <content type="html">&lt;p&gt;I&#39;ve been playing around with &lt;a href=&quot;http://twitter.github.com/bootstrap/&quot;&gt;twitter bootstrap&lt;/a&gt;. It&#39;s like a css framework to help designer or developer create a nice and clean site.
It&#39;s offer grid system, predefine layout, button, javascript, carousel etc. You can build website in just a few hours. Very nice for
prototyping.&lt;/p&gt;

&lt;p&gt;I&#39;ve been using it to build this blog since it was version 1. Recently i had a chance to upgrade it to version 2.
The new version offer a lot of functionalities, one the feature that I play a lot is the responsive design.&lt;/p&gt;

&lt;p&gt;Basically &lt;a href=&quot;http://en.wikipedia.org/wiki/Responsive_Web_Design&quot;&gt;Responsive Web Design&lt;/a&gt; (RWD) means the ability of the web site to adapt to the user screen size. So the page should look different
in a way that it suited for specific screen. Like this website will look different if it&#39;s open with mobile phone, portrait mode on tablet,
landscape mode on tablet, net book or even in a large desktop. This actually achieved by using W3C CSS3 media query. It means that it uses
different stylesheet for each of the screen size. More info on RWD in twitter bootstrap can be found &lt;a href=&quot;http://twitter.github.com/bootstrap/scaffolding.html#responsive&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can test this functionality by resizing your browser window. Try to drag it slowly and watch the page banner slightly change.
here are the screen shoot of the design.&lt;/p&gt;

&lt;ul class=&quot;thumbnails&quot; style=&quot;text-align: center&quot;&gt;
  &lt;li class=&quot;span5&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836336/&quot; title=&quot;Desktop View by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7188/6777836336_cfc30a387d.jpg&quot; width=&quot;500&quot; height=&quot;328&quot; alt=&quot;Desktop View&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Desktop View (1210px and up)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li class=&quot;span5&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836342/&quot; title=&quot;Tablet Landscape by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7177/6777836342_2bae8d18f9.jpg&quot; width=&quot;500&quot; height=&quot;403&quot; alt=&quot;Tablet Landscape&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Tablet Landscape (768px to 979px)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li class=&quot;span4&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836344/&quot; title=&quot;Tablet View by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7068/6777836344_04a80d610b_m.jpg&quot; width=&quot;240&quot; height=&quot;237&quot; alt=&quot;Tablet View&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Tablet Portrait (480px to 768px)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li class=&quot;span4&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836350/&quot; title=&quot;Tablet with menu by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7050/6777836350_3a8e661196_m.jpg&quot; width=&quot;240&quot; height=&quot;237&quot; alt=&quot;Tablet with menu&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Tablet Portrait with menu (480px to 768px)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li class=&quot;span4&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836354/&quot; title=&quot;Mobile Phone by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7191/6777836354_aec27fd376_m.jpg&quot; width=&quot;164&quot; height=&quot;240&quot; alt=&quot;Mobile Phone&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Mobile Phone (480px and below)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li class=&quot;span4&quot;&gt;
    &lt;div class=&quot;thumbnail&quot;&gt;
      &lt;a href=&quot;http://www.flickr.com/photos/77240053@N02/6777836358/&quot; title=&quot;Mobile Phone with menu by yulrizka, on Flickr&quot;&gt;&lt;img src=&quot;http://farm8.staticflickr.com/7205/6777836358_d06448c5da_m.jpg&quot; width=&quot;164&quot; height=&quot;240&quot; alt=&quot;Mobile Phone with menu&quot;&gt;&lt;/a&gt;
      &lt;div class=&quot;caption&quot;&gt;Mobile Phone with Menu(480px and below)&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;



</content>
 </entry>
 
 <entry>
   <title>Jekyll error utf-8 caracter</title>
   <link href="http://labs.yulrizka.com/en/2012/01/jekyll-error-utf-8-caracter.html"/>
   <updated>2012-01-14T17:32:00+01:00</updated>
   <id>http://labs.yulrizka.com/en/2012/01/jekyll-error-utf-8-caracter</id>
   <content type="html">&lt;p&gt;If you having a problem in jekyll when it didn&#39;t generate a post and there is no error in the log file.
you might want to check the content if there is any UTF-8 character encoding such as this &lt;strong&gt;±&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The problem arise if you use ruby 1.9. It rejecting a file that contain non-ASCII character.
it actually got &lt;code&gt;invalid multibyte char (US-ASCII) error message&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;to solve this. I added this line to &lt;code&gt;.bashrc&lt;/code&gt; or &lt;code&gt;zshrc&lt;/code&gt; if you are using zsh&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight bash&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LC_ALL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LANG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;It should fix the problem now.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Testing ruby code with benchmark_suite</title>
   <link href="http://labs.yulrizka.com/en/2012/01/testing-ruby-code-with-benchmark-suite.html"/>
   <updated>2012-01-14T12:05:00+01:00</updated>
   <id>http://labs.yulrizka.com/en/2012/01/testing-ruby-code-with-benchmark-suite</id>
   <content type="html">&lt;p&gt;Just a couple days ago I found out &lt;a href=&quot;http://www.therubygame.com&quot; title=&quot;The Ruby Game&quot;&gt;therubygame.com&lt;/a&gt; which challenge us to
solve a problem with ruby. The result were measured by the &lt;strong&gt;fastest&lt;/strong&gt;, &lt;strong&gt;slowest&lt;/strong&gt;, &lt;strong&gt;shortest&lt;/strong&gt;, &lt;strong&gt;longest&lt;/strong&gt;,
&lt;strong&gt;cheaters&lt;/strong&gt; (yup there are also some rule).&lt;/p&gt;

&lt;p&gt;And also I was listening to an episode of ruby rouge on &lt;a href=&quot;http://rubyrogues.com/034-rr-benchmarking-and-profiling/&quot; title=&quot;034 RR Benchmarking and Profiling&quot;&gt;Benchmarking&lt;/a&gt;. And there is one tools called &lt;a href=&quot;http://rubygems.org/gems/benchmark_suite&quot; title=&quot;benchmark_suite&quot;&gt;benchmark_suite&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So there is this &lt;a href=&quot;http://www.therubygame.com/challenges/3/submissions&quot; title=&quot;Challenge #3&quot;&gt;challenge&lt;/a&gt; to capitalize first letter of every word. I want to compare my code to the fastest solution there.
so i installed the gem, also the &lt;a href=&quot;http://rubygems.org/gems/ffi&quot; title=&quot;ffi gem&quot;&gt;ruby-ffi&lt;/a&gt; gem that somewhat fix an error while I tried to run the benchmark.&lt;/p&gt;

&lt;p&gt;so this is the code to benchmark it&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt; &lt;div class=&#39;highlight ruby&#39;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#39;gutter&#39;&gt;&lt;pre class=&#39;line-numbers&#39;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;benchmark/ips&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;The small brown &amp;amp; ginger fox JUMPED OVER the gate&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;no&quot;&gt;Benchmark&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ips&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;first&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\w+/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capitalize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;second&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:capitalize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39; &amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;And here are the result&lt;/p&gt;

&lt;div class=&quot;well&quot;&gt;
  &lt;p&gt;first 55609.3 (±10.7%) i/s - 277202 in 5.048175s (cycle=4471) &lt;/p&gt;
  &lt;p&gt;second 77996.4 (±10.2%) i/s - 389844 in 5.055319s (cycle=6188)&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;The first code run &lt;strong&gt;55.609,3&lt;/strong&gt; times per second and the latter is &lt;strong&gt;77.996,4&lt;/strong&gt; times per second.
So the second code run more than the first code in one second. Which mean the second code is faster.&lt;/p&gt;

&lt;p&gt;Also the first code run &lt;strong&gt;277.202&lt;/strong&gt; times in &lt;strong&gt;5.048175&lt;/strong&gt; sec while the second code run &lt;strong&gt;389.844&lt;/strong&gt; times in &lt;strong&gt;5.05&lt;/strong&gt; sec&lt;/p&gt;

&lt;p&gt;So this mean, that &lt;strong&gt;regex is more slower&lt;/strong&gt; then calling capitalized on each element on array&lt;/p&gt;
</content>
 </entry>
 
 
</feed>